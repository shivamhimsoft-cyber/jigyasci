<!-- templates/macros/_flash_macros.html -->
{% macro render_flash_messages() %}
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div id="flash-messages" class="fixed top-4 right-4 z-50 w-80 max-w-full space-y-3">
                {% for category, message in messages[-3:] %}  <!-- Limit to last 3 to avoid clutter -->
                    <div class="flex items-start p-4 rounded-lg shadow-lg border transition-all duration-300 transform 
                                {% if category == 'success' %}bg-green-100 border-green-300 text-green-800{% endif %}
                                {% if category == 'error' %}bg-red-100 border-red-300 text-red-800{% endif %}
                                {% if category == 'warning' %}bg-yellow-100 border-yellow-300 text-yellow-800{% endif %}
                                flash-message animate-slide-in">
                        <div class="flex-shrink-0">
                            {% if category == 'success' %}
                                <i class="ti ti-check text-xl"></i>
                            {% elif category == 'error' %}
                                <i class="ti ti-alert-circle text-xl"></i>
                            {% elif category == 'warning' %}
                                <i class="ti ti-alert-triangle text-xl"></i>
                            {% endif %}
                        </div>
                        <div class="ml-3 flex-1">
                            <p class="text-sm font-medium">{{ message }}</p>
                        </div>
                        <button type="button" class="ml-2 p-1 hover:bg-gray-200 rounded-full focus:outline-none" onclick="dismissMessage(event, this)">
                            <i class="ti ti-x text-lg"></i>
                        </button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
{% endmacro %}
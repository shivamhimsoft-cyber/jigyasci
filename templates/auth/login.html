<!-- templates\auth\login.html -->
{% extends "authBase.html" %}

{% block title %}Login | Research Collaboration Platform{% endblock %}

{% block content %}
<div class="lg:w-5/12 w-full ">
    <h2 class="font-bold text-3xl mb-3">Welcome to JigyaSci Admin</h2>
    <p class="text-base text-dark dark:text-darklink mb-7 font-medium">Your Admin Dashboard</p>
    <div
            class="grid grid-cols-2 gap-6 mb-7">
        <a href="{{ url_for('auth.login_google') }}"
           class="border border-light-dark rounded-sm py-3 px-3 justify-center flex text-dark dark:text-darklink font-medium items-center hover:text-primary dark:hover:text-primary">
            <img
                    src="{{ url_for('static', filename='assets/images/svgs/google-icon.svg') }}"
                    alt class="me-2"
                    width="18" height="18">
            <span
                    class="shrink-0 md:flex hidden fon">Sign
                                                        in with</span>
            <span class="shrink-0 ml-1">
                                                        Google</span>
        </a>
        <!-- <a href="javascript:void(0)"
           class="border border-light-dark rounded-sm py-3 px-3 justify-center flex text-dark dark:text-darklink font-medium items-center hover:text-primary dark:hover:text-primary">
            <img
                    src="../static/assets/images/svgs/facebook-icon.svg"
                    alt
                    class="me-2" width="18"
                    height="18">
            <span
                    class="shrink-0 md:flex hidden">Sign
                                                        in with</span>
            <span class="shrink-0 ml-1">
                                                        FB</span>
        </a> -->
    </div>
    <div class="flex items-center text-base before:flex-[1_1_0%] before:border-t before:border-border before:me-6 after:flex-[1_1_0%] after:border-t after:border-border after:ms-6 dark:text-white dark:before:border-darkborder dark:after:border-darkborder">or
        sign in with</div>
    <form method="POST" action="" novalidate>
        {{ form.hidden_tag() }}
        <div class="flex flex-col gap-5 mt-7">
            <div>
                {{ form.email.label(class="text-dark dark:text-darklink font-semibold mb-2 block ") }}
                {% if form.email.errors %}
                {{ form.email(class="form-control is-invalid") }}
                <div class="invalid-feedback">
                    {% for error in form.email.errors %}
                    <span>{{ error }}</span>
                    {% endfor %}
                </div>
                {% else %}
                {{ form.email(class="form-control rounded-full") }}
                {% endif %}
            </div>
            <div>
                {{ form.password.label(class="text-dark dark:text-darklink font-semibold mb-2 block") }}
                {% if form.password.errors %}
                {{ form.password(class="form-control is-invalid") }}
                <div class="invalid-feedback">
                    {% for error in form.password.errors %}
                    <span>{{ error }}</span>
                    {% endfor %}
                </div>
                {% else %}
                {{ form.password(class="form-control rounded-full") }}
                {% endif %}
            </div>



            <div>
                <div class="flex justify-between my-2">
                    <div class="flex items-center gap-2">
                        {{ form.remember_me(class="cursor-pointer label flex items-center") }}
                         <div>
                             {{ form.remember_me.label(class="border-bordergray w-4 h-4 rounded text-primary dark:border-darkborder bg-transparent dark:checked:bg-primary dark:checked:border-primary focus:ring-0 focus:ring-offset-0") }}
                         </div>
                    </div>
<!--                    <a-->
<!--                            href=""-->
<!--                            class="text-primary font-semibold">Forgot-->
<!--                        Password ?</a>-->
                </div>
            </div>
            {{ form.submit(class="btn btn-md py-3") }}

            <div class="mt-2.5">
                <span class="text-base font-medium ">Don't have an account?
                    <a href="{{ url_for('auth.register') }}" class="text-primary font-medium ms-2">
                        Create an account
                    </a>
                </span>
            </div>
        </div>
    </form>
</div>

{% if show_pending_modal %}
<div id="pendingModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4">
    <div class="w-full max-w-sm bg-white rounded-lg shadow-xl border border-gray-200">
        <div class="p-6">
            <div class="flex items-center mb-4">
                <div class="flex-shrink-0">
                    <svg class="h-6 w-6 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                </div>
                <h3 class="ml-3 text-lg font-semibold text-gray-900">Account Verification Pending</h3>
            </div>
            <div class="mb-6">
                <p class="text-sm text-gray-700 leading-relaxed">Your Scientist account has been submitted for admin verification. You will receive an update within 24 hours via email, indicating whether it has been verified or rejected. Once verified, you can log in to access the platform.</p>
            </div>
            <div class="flex justify-center">
                <button id="closeModal" class="px-6 py-2 bg-blue-600 text-white text-sm font-medium rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out">
                    OK, Got it
                </button>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const modal = document.getElementById('pendingModal');
    if (modal) {
        document.getElementById('closeModal').onclick = function() {
            modal.style.display = 'none';
        };
        modal.onclick = function(e) {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        };
    }
});
</script>
{% endif %}
{% endblock %}
